let response,form=document.querySelector("#form-video-upload"),file_input=document.querySelector("#file-video"),progress=document.querySelector("#progress"),content_info=document.getElementById("content-info"),content_upload=document.getElementById("content-upload"),progress_value=document.getElementById("progress-value"),video_input=document.getElementById("file-video"),video_name=document.getElementById("video-file-name"),video_rec_click=document.querySelectorAll(".video-rec");window.onload=()=>{form.onsubmit=function(e){return 0==file_input.files.length?(e.preventDefault(),!1):(console.log("Iniciando upload"),content_info.classList.remove("show"),content_upload.classList.add("show"),document.querySelector("#video-rec-again").classList.remove("show"),document.querySelector("#video-send").classList.remove("show"),upload_video.file_size=file_input.files[0].size.toString(),jQuery.post(polen_ajax.ajaxurl+"?action=make_video_slot_vimeo",upload_video,(e,o,n)=>{if(200==n.status){var t=new FormData;t.append("file_data",file_input.files[0]),jQuery.ajax({url:e.data.body.upload.upload_link,type:"POST",xhr:function(){var e=jQuery.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",progressFunction,!1),e},success:completeHandler,error:errorHandler,complete:completeHandler,data:t,cache:!1,contentType:!1,processData:!1})}}),e.preventDefault(),!1)},video_rec_click.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),video_input.click()}))})),video_input.addEventListener("change",(function(e){changeText(),document.querySelector("#video-rec").classList.remove("show"),document.querySelector("#video-rec-again").classList.add("show"),document.querySelector("#video-send").classList.add("show")}))};let updateProgress=e=>{console.log(e.lengthComputable)},completeHandler=e=>{console.log("complete"),content_upload.innerHTML='<p class="my-4"><strong id="progress-value">Enviado</strong></p>';let o={action:"order_status_completed",order:upload_video.order_id};jQuery.post(polen_ajax.ajaxurl,o,(e,o,n)=>{window.location.href=museobj.base_url+"/envio-video-sucesso/"}).fail((function(){alert("Ocorreu um erro, envie o video novamente")}))},errorHandler=(e,o,n)=>{console.log("error",e,o,n)},transferCanceled=e=>{console.log("cancelado")};function progressFunction(e){e.lengthComputable&&(progress_value.innerText=`Enviando vídeo ${Math.floor(e.loaded/e.total*100)}%`)}function changeText(){document.getElementById("info").innerText="Vídeo gravado com sucesso"}function getFullPath(e){if(e){var o=e.indexOf("\\")>=0?e.lastIndexOf("\\"):e.lastIndexOf("/"),n=e.substring(o);return 0!==n.indexOf("\\")&&0!==n.indexOf("/")||(n=n.substring(1)),n}return!1}serialize=function(e,o){var n,t=[];for(n in e)if(e.hasOwnProperty(n)){var r=o?o+"["+n+"]":n,l=e[n];t.push(null!==l&&"object"==typeof l?serialize(l,r):encodeURIComponent(r)+"="+encodeURIComponent(l))}return t.join("&")};