let response,form=document.querySelector("#form-video-upload"),file_input=document.querySelector("#file-video"),progress=document.querySelector("#progress"),content_info=document.getElementById("content-info"),content_upload=document.getElementById("content-upload"),progress_value=document.getElementById("progress-value"),video_input=document.getElementById("file-video"),video_name=document.getElementById("video-file-name"),video_rec_click=document.querySelectorAll(".video-rec");window.onload=()=>{form.onsubmit=function(e){return 0==file_input.files.length?(e.preventDefault(),!1):(console.log("Iniciando upload"),content_info.classList.remove("show"),content_upload.classList.add("show"),document.querySelector("#video-rec-again").classList.remove("show"),document.querySelector("#video-send").classList.remove("show"),upload_video.file_size=file_input.files[0].size.toString(),jQuery.post(woocommerce_params.ajaxurl+"?action=make_video_slot_vimeo",upload_video,(e,o,n)=>{if(200==n.status){let o=file_input.files[0];new tus.Upload(o,{uploadUrl:e.data.body.upload.upload_link,onError:errorHandler,onProgress:progressFunction,onSuccess:completeHandler}).start()}else console.log("deu ruim")}).fail(errorHandler),e.preventDefault(),!1)},video_rec_click.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),video_input.click()}))})),video_input.addEventListener("change",(function(e){changeText(),document.querySelector("#video-rec").classList.remove("show"),document.querySelector("#video-rec-again").classList.add("show"),document.querySelector("#video-send").classList.add("show")}))};let completeHandler=()=>{content_upload.innerHTML='<p class="my-4"><strong id="progress-value">Enviado</strong></p>';let e={action:"order_status_completed",order:upload_video.order_id};jQuery.post(woocommerce_params.ajaxurl,e,()=>{window.location.href=museobj.base_url+"/my-account/success-upload/?order_id="+upload_video.order_id}).fail(errorHandler)},errorHandler=(e,o,n)=>{alert("Erro no envio do arquivo, tente novamente"),document.location.reload()};function progressFunction(e,o){progress_value.innerText=`Enviando vídeo ${Math.floor(e/o*100)}%`}function changeText(){document.getElementById("info").innerText="Vídeo gravado com sucesso"}