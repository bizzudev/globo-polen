const btn_play=document.getElementById("btn-play"),video_tribute=document.getElementById("tribute-home-video"),formCreateName="form#form-create-tribute",formCreate=document.querySelector(formCreateName),slug=document.getElementById("slug");function playVideo(e){video_tribute.paused?(btn_play.classList.add("hidden"),video_tribute.play()):(btn_play.classList.remove("hidden"),video_tribute.pause())}function slugValidate(e,t){const r=document.getElementById("slug-message");slug.classList.remove("error"),r.classList.remove("error"),r.innerText="",e||(slug.classList.add("error"),r.classList.add("error")),r.innerText=t}function checkSlug(){polSpinner(CONSTANTS.SHOW,".slug-wrap"),jQuery.ajax({type:"POST",url:polenObj.ajax_url,data:{action:"check_tribute_slug_exists",slug:slug.value},success:function(e){e.success?slugValidate(!0,e.data):slugValidate(!1,e.data)},error:function(e,t,r){slugValidate(!1,e.responseJSON.data)},complete:function(){polSpinner(CONSTANTS.HIDDEN)}})}function createTribute(e){e.preventDefault(),slug.classList.contains("error")?polError("É preciso uma URL válida para seu Tributo"):(polSpinner(),jQuery.post(polenObj.ajax_url,jQuery(formCreateName).serialize(),(function(e){e.success?(setSessionMessage(CONSTANTS.SUCCESS,"Tributo criado","Agora convide seus amigos para essa homenagem"),window.location.href=e.data.url_redirect):polError(e.data)})).fail((function(e){e.responseJSON?polError(e.responseJSON.data):polError(e.statusText)})).complete((function(e){polSpinner("hidden")})))}if(btn_play&&btn_play.addEventListener("click",playVideo),slug&&slug.addEventListener("focusout",checkSlug),formCreate&&formCreate.addEventListener("submit",createTribute),document.getElementById("invite-friends")){new Vue({el:"#invite-friends",data:{name:"",email:"",friends:[]},methods:{resetAddFriend:function(){this.name=this.email=""},addFriend:function(){this.friends.push({name:this.name,email:this.email}),this.resetAddFriend()},removeFriend:function(e){this.friends=this.friends.filter(t=>t.email!=e)},sendFriends:function(){polSpinner(),jQuery.post(polenObj.ajax_url,jQuery("form#friends-form").serialize(),(function(e){e.success?(polMessage("Amigos adicionados","Amigos adicionados com sucesso"),this.friends=[]):polError(e.data)})).fail((function(e){e.responseJSON?polError(e.responseJSON.data):polError(e.statusText)})).complete((function(e){polSpinner("hidden")}))}}})}